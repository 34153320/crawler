import json
import scrapy
import os
import logging
from scrapy.pipelines.files import FilesPipeline
from urllib.parse import urlparse
from scrapy.crawler import CrawlerProcess
from scrapy.exceptions import DropItem
from itemadapter import ItemAdapter
from twisted.internet import reactor
logging.getLogger('scrapy').propagate = False


class MyFilesPipeline(FilesPipeline):
     def file_path(self, request, response=None, info=None):        
          return request.meta.get('filename', '') + '.'+ os.path.basename(urlparse(request.url).path).split('.')[-1]
    
     def get_media_requests(self, item, info):
          file_urls = item['file_urls']
          meta = {'filename': item['name'][0].replace(' ', '')}
          yield scrapy.Request(url=file_urls[0], meta=meta)
    
#      def item_completed(self, item, spider):
#           if len(item['file_urls']) == 0:
#              raise DropItem('Not Found')
#           else:
#             return item
        

class composerImage(scrapy.Item):
     files = scrapy.Field()
     file_urls = scrapy.Field()
     name = scrapy.Field()

class ComposerImagespider(scrapy.Spider):
     name = "composerimage"
     allowed_domains = ["en.wikipedia.org"]
     start_urls = ['https://en.wikipedia.org/wiki/Domenico_Alberti', 'https://en.wikipedia.org/wiki/Johann_Sebastian_Bach', 'https://en.wikipedia.org/wiki/Domenico_Cimarosa', 'https://en.wikipedia.org/wiki/Fran%C3%A7ois_Couperin', 'https://en.wikipedia.org/wiki/Louis-Claude_Daquin', 'https://en.wikipedia.org/wiki/Baldassare_Galuppi', 'https://en.wikipedia.org/wiki/Lodovico_Giustini', 'https://en.wikipedia.org/wiki/Christoph_Graupner', 'https://en.wikipedia.org/wiki/George_Frideric_Handel', 'https://en.wikipedia.org/wiki/Giovanni_Benedetto_Platti', 'https://en.wikipedia.org/wiki/Henry_Purcell', 'https://en.wikipedia.org/wiki/Jean-Philippe_Rameau', 'https://en.wikipedia.org/wiki/Domenico_Scarlatti', 'https://en.wikipedia.org/wiki/Carl_Philipp_Emanuel_Bach', 'https://en.wikipedia.org/wiki/Johann_Christian_Bach', 'https://en.wikipedia.org/wiki/Johann_Christoph_Friedrich_Bach', 'https://en.wikipedia.org/wiki/Wilhelm_Friedemann_Bach', 'https://en.wikipedia.org/wiki/Ludwig_van_Beethoven', 'https://en.wikipedia.org/wiki/Muzio_Clementi', 'https://en.wikipedia.org/wiki/Philip_Cogan', 'https://en.wikipedia.org/wiki/Franti%C5%A1ek_Xaver_Du%C5%A1ek', 'https://en.wikipedia.org/wiki/Jan_Ladislav_Dussek', 'https://en.wikipedia.org/wiki/Anton_Eberl', 'https://en.wikipedia.org/wiki/Joseph_Leopold_Eybler', 'https://en.wikipedia.org/wiki/Joseph_Gelinek', 'https://en.wikipedia.org/wiki/Johann_Wilhelm_H%C3%A4ssler', 'https://en.wikipedia.org/wiki/Joseph_Haydn', 'https://en.wikipedia.org/wiki/Franz_Anton_Hoffmeister', 'https://en.wikipedia.org/wiki/Leopold_Kozeluch', 'https://en.wikipedia.org/wiki/Nikolaus_von_Krufft', 'https://en.wikipedia.org/wiki/Francesca_Lebrun', 'https://en.wikipedia.org/wiki/Leopold_Mozart', 'https://en.wikipedia.org/wiki/Wolfgang_Amadeus_Mozart', 'https://en.wikipedia.org/wiki/Ignaz_Pleyel', 'https://en.wikipedia.org/wiki/Johann_Friedrich_Reichardt', 'https://en.wikipedia.org/wiki/Anton_Reicha', 'https://en.wikipedia.org/wiki/Antonio_Rosetti', 'https://en.wikipedia.org/wiki/Antonio_Salieri', 'https://en.wikipedia.org/wiki/Antonio_Francisco_Javier_Jos%C3%A9_Soler_Ramos', 'https://en.wikipedia.org/wiki/Fernando_Sor', 'https://en.wikipedia.org/wiki/Johann_Samuel_Schr%C3%B6ter', 'https://en.wikipedia.org/wiki/Daniel_Steibelt', 'https://en.wikipedia.org/wiki/Johann_Baptist_Vanhal', 'https://en.wikipedia.org/wiki/Daniel_Gottlob_T%C3%BCrk', 'https://en.wikipedia.org/wiki/Joseph_W%C3%B6lfl', 'https://en.wikipedia.org/wiki/Charles-Valentin_Alkan', 'https://en.wikipedia.org/wiki/Anton_Arensky', 'https://en.wikipedia.org/wiki/Tekla_B%C4%85darzewska-Baranowska', 'https://en.wikipedia.org/wiki/Mily_Balakirev', 'https://en.wikipedia.org/wiki/Friedrich_Baumfelder', 'https://en.wikipedia.org/wiki/Amy_Beach', 'https://en.wikipedia.org/wiki/Franz_Bendel', 'https://en.wikipedia.org/wiki/William_Sterndale_Bennett', 'https://en.wikipedia.org/wiki/Peter_Benoit', 'https://en.wikipedia.org/wiki/Ludwig_Berger_(composer)', 'https://en.wikipedia.org/wiki/Henri_Bertini', 'https://en.wikipedia.org/wiki/Felix_Blumenfeld', 'https://en.wikipedia.org/wiki/Charles_Samuel_Bovy-Lysberg', 'https://en.wikipedia.org/wiki/Johannes_Brahms', 'https://en.wikipedia.org/wiki/Friedrich_Burgm%C3%BCller', 'https://en.wikipedia.org/wiki/Hans_von_B%C3%BClow', 'https://en.wikipedia.org/wiki/Ignacio_Cervantes', 'https://en.wikipedia.org/wiki/Emmanuel_Chabrier', 'https://en.wikipedia.org/wiki/C%C3%A9cile_Chaminade', 'https://en.wikipedia.org/wiki/Fr%C3%A9d%C3%A9ric_Chopin', 'https://en.wikipedia.org/wiki/Johann_Baptist_Cramer', 'https://en.wikipedia.org/wiki/Carl_Czerny', 'https://en.wikipedia.org/wiki/Eugen_d%27Albert', 'https://en.wikipedia.org/wiki/%C3%89lie-Miriam_Delaborde', 'https://en.wikipedia.org/wiki/Charles_Delioux', 'https://en.wikipedia.org/wiki/Anton_Diabelli', 'https://en.wikipedia.org/wiki/Theodor_D%C3%B6hler', 'https://en.wikipedia.org/wiki/Alexander_Dreyschock', 'https://en.wikipedia.org/wiki/Anton%C3%ADn_Dvo%C5%99%C3%A1k', 'https://en.wikipedia.org/wiki/Michele_Esposito', 'https://en.wikipedia.org/wiki/Gabriel_Faur%C3%A9', 'https://en.wikipedia.org/wiki/John_Field_(composer)', 'https://en.wikipedia.org/wiki/Julian_Fontana', 'https://en.wikipedia.org/wiki/Adolfo_Fumagalli', 'https://en.wikipedia.org/wiki/Mikhail_Glinka', 'https://en.wikipedia.org/wiki/Henri_Gobbi', 'https://en.wikipedia.org/wiki/Benjamin_Godard', 'https://en.wikipedia.org/wiki/Louis_Moreau_Gottschalk', 'https://en.wikipedia.org/wiki/Edvard_Grieg', 'https://en.wikipedia.org/wiki/Cornelius_Gurlitt_(composer)', 'https://en.wikipedia.org/wiki/Adolphe_Gutmann', 'https://en.wikipedia.org/wiki/Charles-Louis_Hanon', 'https://en.wikipedia.org/wiki/Stephen_Heller', 'https://en.wikipedia.org/wiki/Swan_Hennessy', 'https://en.wikipedia.org/wiki/Adolf_von_Henselt', 'https://en.wikipedia.org/wiki/Henri_Herz', 'https://en.wikipedia.org/wiki/Franz_Hitz', 'https://en.wikipedia.org/wiki/Ferdinand_Hiller', 'https://en.wikipedia.org/wiki/Johann_Nepomuk_Hummel', 'https://en.wikipedia.org/wiki/Alfred_Ja%C3%ABll', 'https://en.wikipedia.org/wiki/Friedrich_Kalkbrenner', 'https://en.wikipedia.org/wiki/Joseph_Christoph_Kessler', 'https://en.wikipedia.org/wiki/Theodor_Kirchner', 'https://en.wikipedia.org/wiki/Anton_de_Kontski', 'https://en.wikipedia.org/wiki/Wilhelm_Kuhe', 'https://en.wikipedia.org/wiki/Friedrich_Kuhlau', 'https://en.wikipedia.org/wiki/Theodor_Kullak', 'https://en.wikipedia.org/wiki/Th%C3%A9odore_Lack', 'https://en.wikipedia.org/wiki/Franz_Liszt', 'https://en.wikipedia.org/wiki/Henry_Litolff', 'https://en.wikipedia.org/wiki/Sergei_Lyapunov', 'https://en.wikipedia.org/wiki/Edward_MacDowell', 'https://en.wikipedia.org/wiki/D%C3%A9sir%C3%A9_Magnus', 'https://en.wikipedia.org/wiki/Antoine_Fran%C3%A7ois_Marmontel', 'https://en.wikipedia.org/wiki/William_Mason_(composer)', 'https://en.wikipedia.org/wiki/Fanny_Mendelssohn', 'https://en.wikipedia.org/wiki/Felix_Mendelssohn', 'https://en.wikipedia.org/wiki/Am%C3%A9d%C3%A9e_M%C3%A9reaux', 'https://en.wikipedia.org/wiki/Aleksander_Michalowski', 'https://en.wikipedia.org/wiki/Ignaz_Moscheles', 'https://en.wikipedia.org/wiki/Moritz_Moszkowski', 'https://en.wikipedia.org/wiki/Modest_Mussorgsky', 'https://en.wikipedia.org/wiki/V%C3%ADt%C4%9Bzslav_Nov%C3%A1k', 'https://en.wikipedia.org/wiki/Joseph_O%27Kelly', 'https://en.wikipedia.org/wiki/Arthur_O%27Leary_(composer)', 'https://en.wikipedia.org/wiki/George_Onslow_(composer)', 'https://en.wikipedia.org/wiki/Paul_Pabst', 'https://en.wikipedia.org/wiki/Jan_Gerard_Palm', 'https://en.wikipedia.org/wiki/%C3%89mile_Prudent', 'https://en.wikipedia.org/wiki/Alfred_Quidant', 'https://en.wikipedia.org/wiki/Sergei_Rachmaninoff', 'https://en.wikipedia.org/wiki/Max_Reger', 'https://en.wikipedia.org/wiki/Carl_Reinecke', 'https://en.wikipedia.org/wiki/Nikolai_Rimsky-Korsakov', 'https://en.wikipedia.org/wiki/Anton_Rubinstein', 'https://en.wikipedia.org/wiki/Camille_Saint-Sa%C3%ABns', 'https://en.wikipedia.org/wiki/Xaver_Scharwenka', 'https://en.wikipedia.org/wiki/Aloys_Schmitt', 'https://en.wikipedia.org/wiki/Franz_Schubert', 'https://en.wikipedia.org/wiki/Julius_Schulhoff', 'https://en.wikipedia.org/wiki/Clara_Schumann', 'https://en.wikipedia.org/wiki/Robert_Schumann', 'https://en.wikipedia.org/wiki/Ludvig_Schytte', 'https://en.wikipedia.org/wiki/Giovanni_Sgambati', 'https://en.wikipedia.org/wiki/Jean_Sibelius', 'https://en.wikipedia.org/wiki/Bed%C5%99ich_Smetana', 'https://en.wikipedia.org/wiki/Sydney_Smith', 'https://en.wikipedia.org/wiki/Charles_Villiers_Stanford', 'https://en.wikipedia.org/wiki/Camille-Marie_Stamaty', 'https://en.wikipedia.org/wiki/Karl_Tausig', 'https://en.wikipedia.org/wiki/Pyotr_Ilyich_Tchaikovsky', 'https://en.wikipedia.org/wiki/Thomas_Tellefsen', 'https://en.wikipedia.org/wiki/Sigismond_Thalberg', 'https://en.wikipedia.org/wiki/Jan_V%C3%A1clav_Vo%C5%99%C3%AD%C5%A1ek', 'https://en.wikipedia.org/wiki/Richard_Wagner', 'https://en.wikipedia.org/wiki/Carl_Maria_von_Weber', 'https://en.wikipedia.org/wiki/J%C3%B3zef_Wieniawski', 'https://en.wikipedia.org/wiki/Aleksander_Zarzycki', 'https://en.wikipedia.org/wiki/W%C5%82adys%C5%82aw_%C5%BBele%C5%84ski_(composer)', 'https://en.wikipedia.org/wiki/Theodor_Adorno', 'https://en.wikipedia.org/wiki/Miguel_del_Aguila', 'https://en.wikipedia.org/wiki/Roy_Agnew', 'https://en.wikipedia.org/wiki/Willem_Andriessen', 'https://en.wikipedia.org/wiki/Samuel_Barber', 'https://en.wikipedia.org/wiki/B%C3%A9la_Bart%C3%B3k', 'https://en.wikipedia.org/wiki/Arnold_Bax', 'https://en.wikipedia.org/wiki/Emile-Robert_Blanchet', 'https://en.wikipedia.org/wiki/York_Bowen', 'https://en.wikipedia.org/wiki/Frank_Bridge', 'https://en.wikipedia.org/wiki/Ferruccio_Busoni', 'https://en.wikipedia.org/wiki/Alfredo_Casella', 'https://en.wikipedia.org/wiki/C%C3%A9cile_Chaminade', 'https://en.wikipedia.org/wiki/Mikalojus_Konstantinas_%C4%8Ciurlionis', 'https://en.wikipedia.org/wiki/Aaron_Copland', 'https://en.wikipedia.org/wiki/Claude_Debussy', 'https://en.wikipedia.org/wiki/Duke_Ellington', 'https://en.wikipedia.org/wiki/Samuil_Feinberg', 'https://en.wikipedia.org/wiki/Ossip_Gabrilowitsch', 'https://en.wikipedia.org/wiki/George_Gershwin', 'https://en.wikipedia.org/wiki/Alberto_Ginastera', 'https://en.wikipedia.org/wiki/Alexander_Glazunov', 'https://en.wikipedia.org/wiki/Leopold_Godowsky', 'https://en.wikipedia.org/wiki/Percy_Grainger', 'https://en.wikipedia.org/wiki/Enrique_Granados', 'https://en.wikipedia.org/wiki/Alexander_Gretchaninov', 'https://en.wikipedia.org/wiki/Gabriel_Grovlez', 'https://en.wikipedia.org/wiki/Vladimir_Horowitz', 'https://en.wikipedia.org/wiki/Charles_Ives', 'https://en.wikipedia.org/wiki/Scott_Joplin', 'https://en.wikipedia.org/wiki/Dmitri_Kabalevsky', 'https://en.wikipedia.org/wiki/Aram_Khachaturian', 'https://en.wikipedia.org/wiki/Viktor_Kosenko', 'https://en.wikipedia.org/wiki/Joseph_Lamb_(composer)', 'https://en.wikipedia.org/wiki/Constant_Lambert', 'https://en.wikipedia.org/wiki/Ernesto_Lecuona', 'https://en.wikipedia.org/wiki/Andr%C3%A9_Mathieu', 'https://en.wikipedia.org/wiki/Nikolai_Medtner', 'https://en.wikipedia.org/wiki/Erkki_Melartin', 'https://en.wikipedia.org/wiki/Olivier_Messiaen', 'https://en.wikipedia.org/wiki/Federico_Mompou', 'https://en.wikipedia.org/wiki/Thelonious_Monk', 'https://en.wikipedia.org/wiki/Nikolai_Myaskovsky', 'https://en.wikipedia.org/wiki/Ernesto_Nazareth', 'https://en.wikipedia.org/wiki/Walter_Niemann_(composer)', 'https://en.wikipedia.org/wiki/Ignacy_Jan_Paderewski', 'https://en.wikipedia.org/wiki/Jacobo_Palm', 'https://en.wikipedia.org/wiki/John_Palm', 'https://en.wikipedia.org/wiki/Rudolph_Palm', 'https://en.wikipedia.org/wiki/Selim_Palmgren', 'https://en.wikipedia.org/wiki/Isidor_Philipp', 'https://en.wikipedia.org/wiki/Francis_Poulenc', 'https://en.wikipedia.org/wiki/Sergei_Prokofiev', 'https://en.wikipedia.org/wiki/Sergei_Rachmaninoff', 'https://en.wikipedia.org/wiki/Maurice_Ravel', 'https://en.wikipedia.org/wiki/Vladimir_Rebikov', 'https://en.wikipedia.org/wiki/Hugo_Reinhold', 'https://en.wikipedia.org/wiki/Rhen%C3%A9-Baton', 'https://en.wikipedia.org/wiki/Jean_Roger-Ducasse', 'https://en.wikipedia.org/wiki/Erik_Satie', 'https://en.wikipedia.org/wiki/Ahmed_Adnan_Saygun', 'https://en.wikipedia.org/wiki/Florent_Schmitt', 'https://en.wikipedia.org/wiki/Arnold_Schoenberg', 'https://en.wikipedia.org/wiki/James_Scott_(musician)', 'https://en.wikipedia.org/wiki/Alexander_Scriabin', 'https://en.wikipedia.org/wiki/Verdina_Shlonsky', 'https://en.wikipedia.org/wiki/Dmitri_Shostakovich', 'https://en.wikipedia.org/wiki/Jean_Sibelius', 'https://en.wikipedia.org/wiki/Kaikhosru_Shapurji_Sorabji', 'https://en.wikipedia.org/wiki/Alexei_Stanchinsky', 'https://en.wikipedia.org/wiki/Wilhelm_Stenhammar', 'https://en.wikipedia.org/wiki/Richard_Strauss', 'https://en.wikipedia.org/wiki/Igor_Stravinsky', 'https://en.wikipedia.org/wiki/Soulima_Stravinsky', 'https://en.wikipedia.org/wiki/T%C5%8Dru_Takemitsu', 'https://en.wikipedia.org/wiki/Eduard_Tubin', 'https://en.wikipedia.org/wiki/Joaquin_Turina', 'https://en.wikipedia.org/wiki/Galina_Ustvolskaya', 'https://en.wikipedia.org/wiki/Heitor_Villa-Lobos', 'https://en.wikipedia.org/wiki/%C3%81ngel_Villoldo', 'https://en.wikipedia.org/wiki/Pancho_Vladigerov', 'https://en.wikipedia.org/wiki/Fats_Waller', 'https://en.wikipedia.org/wiki/Philip_Aaberg', 'https://en.wikipedia.org/wiki/Thomas_Ad%C3%A8s', 'https://en.wikipedia.org/wiki/Vladimir_Anisimoff', 'https://en.wikipedia.org/wiki/Lera_Auerbach', 'https://en.wikipedia.org/wiki/Nicolas_Bacri', 'https://en.wikipedia.org/wiki/Rich_Batsford', 'https://en.wikipedia.org/wiki/Giorgio_Battistelli', 'https://en.wikipedia.org/wiki/Jason_Charles_Beck', 'https://en.wikipedia.org/wiki/Luciano_Berio', 'https://en.wikipedia.org/wiki/Bart_Berman', 'https://en.wikipedia.org/wiki/Dave_Brubeck', 'https://en.wikipedia.org/wiki/Dimitrije_Bu%C5%BEarovski', 'https://en.wikipedia.org/wiki/Cornelius_Cardew', 'https://en.wikipedia.org/wiki/Roberto_Carnevale', 'https://en.wikipedia.org/wiki/Unsuk_Chin', 'https://en.wikipedia.org/wiki/Artur_Cimirro', 'https://en.wikipedia.org/wiki/Aldo_Clementi', 'https://en.wikipedia.org/wiki/Julian_Cochran', 'https://en.wikipedia.org/wiki/Chick_Corea', 'https://en.wikipedia.org/wiki/George_Crumb', 'https://en.wikipedia.org/wiki/Norman_Dello_Joio', 'https://en.wikipedia.org/wiki/Franco_Donatoni', 'https://en.wikipedia.org/wiki/James_Douglas_(composer)', 'https://en.wikipedia.org/wiki/Tan_Dun', 'https://en.wikipedia.org/wiki/George_Duke', 'https://en.wikipedia.org/wiki/Julius_Eastman', 'https://en.wikipedia.org/wiki/Ludovico_Einaudi', 'https://en.wikipedia.org/wiki/Tanya_Ekanayaka', 'https://en.wikipedia.org/wiki/Mohammed_Fairouz', 'https://en.wikipedia.org/wiki/Morton_Feldman', 'https://en.wikipedia.org/wiki/Lorenzo_Ferrero', 'https://en.wikipedia.org/wiki/Graham_Fitkin', 'https://en.wikipedia.org/wiki/Carlo_Forlivesi', 'https://en.wikipedia.org/wiki/Nils_Frahm', 'https://en.wikipedia.org/wiki/Ola_Gjeilo', 'https://en.wikipedia.org/wiki/Philip_Glass', 'https://en.wikipedia.org/wiki/Chilly_Gonzales', 'https://en.wikipedia.org/wiki/Marc-Andr%C3%A9_Hamelin', 'https://en.wikipedia.org/wiki/Herbie_Hancock', 'https://en.wikipedia.org/wiki/Ichiko_Hashimoto_(musician)', 'https://en.wikipedia.org/wiki/Alistair_Hinton', 'https://en.wikipedia.org/wiki/Joe_Hisaishi', 'https://en.wikipedia.org/wiki/Christopher_Hobbs', 'https://en.wikipedia.org/wiki/Stephen_Hough', 'https://en.wikipedia.org/wiki/Abdullah_Ibrahim', 'https://en.wikipedia.org/wiki/Keith_Jarrett', 'https://en.wikipedia.org/wiki/Aivars_Kal%C4%93js', 'https://en.wikipedia.org/wiki/Shigeru_Kan-no', 'https://en.wikipedia.org/wiki/Nicolai_Kapustin', 'https://en.wikipedia.org/wiki/Elena_Kats-Chernin', 'https://en.wikipedia.org/wiki/Pierre_Kolp', 'https://en.wikipedia.org/wiki/Martin_Kutnowski', 'https://en.wikipedia.org/wiki/Gy%C3%B6rgy_Ligeti', 'https://en.wikipedia.org/wiki/Ji_Liu_(pianist)', 'https://en.wikipedia.org/wiki/Frederik_Magle', 'https://en.wikipedia.org/wiki/Kento_Masuda', 'https://en.wikipedia.org/wiki/Klaus_Mertens', 'https://en.wikipedia.org/wiki/Fred_Momotenko', 'https://en.wikipedia.org/wiki/Conlon_Nancarrow', 'https://en.wikipedia.org/wiki/David_Nevue', 'https://en.wikipedia.org/wiki/Luka_Okros', 'https://en.wikipedia.org/w/index.php?title=Joseph_O%27Neill_(composer)&action=edit&redlink=1', 'https://en.wikipedia.org/wiki/Yukie_Nishimura', 'https://en.wikipedia.org/wiki/Christopher_Norton', 'https://en.wikipedia.org/wiki/Michael_Nyman', 'https://en.wikipedia.org/wiki/Chris_Opperman', 'https://en.wikipedia.org/wiki/Michael_Parsons_(composer)', 'https://en.wikipedia.org/wiki/Fabrizio_Paterlini', 'https://en.wikipedia.org/wiki/Tomi_R%C3%A4is%C3%A4nen', 'https://en.wikipedia.org/wiki/Jan_Randall', 'https://en.wikipedia.org/wiki/Anirudh_Ravichander', 'https://en.wikipedia.org/wiki/Dino_Residbegovic', 'https://en.wikipedia.org/wiki/Max_Richter', 'https://en.wikipedia.org/wiki/Arturo_Rodas', 'https://en.wikipedia.org/wiki/Lee_Ru-ma', 'https://en.wikipedia.org/wiki/Yiruma', 'https://en.wikipedia.org/wiki/Frederic_Rzewski', 'https://en.wikipedia.org/wiki/Ryuichi_Sakamoto', 'https://en.wikipedia.org/wiki/Faz%C4%B1l_Say', 'https://en.wikipedia.org/wiki/Giacinto_Scelsi', 'https://en.wikipedia.org/wiki/Avi_Sch%C3%B6nfeld', 'https://en.wikipedia.org/wiki/Jon_Schmidt', 'https://en.wikipedia.org/wiki/Salvatore_Sciarrino', 'https://en.wikipedia.org/wiki/Peter_Seabourne', 'https://en.wikipedia.org/wiki/Rodion_Konstantinovich_Shchedrin', 'https://en.wikipedia.org/wiki/Yoko_Shimomura', 'https://en.wikipedia.org/wiki/Gregory_Short', 'https://en.wikipedia.org/wiki/Hugh_Shrapnel', 'https://en.wikipedia.org/wiki/Howard_Skempton', 'https://en.wikipedia.org/wiki/Dave_Smith_(composer)', 'https://en.wikipedia.org/wiki/Karlheinz_Stockhausen', 'https://en.wikipedia.org/wiki/William_Susman', 'https://en.wikipedia.org/wiki/Yuji_Takahashi', 'https://en.wikipedia.org/wiki/Karen_Tanaka', 'https://en.wikipedia.org/wiki/Jennifer_Thomas_(pianist)', 'https://en.wikipedia.org/wiki/Robert_Scott_Thompson', 'https://en.wikipedia.org/wiki/Yann_Tiersen', 'https://en.wikipedia.org/wiki/Vladimir_Titov', 'https://en.wikipedia.org/wiki/Julia_Tsenova', 'https://en.wikipedia.org/wiki/P%C4%93teris_Vasks', 'https://en.wikipedia.org/wiki/Carl_Verbraeken', 'https://en.wikipedia.org/wiki/Carl_Vine', 'https://en.wikipedia.org/wiki/Ezequiel_Vi%C3%B1ao', 'https://en.wikipedia.org/wiki/John_White_(composer)', 'https://en.wikipedia.org/wiki/George_Winston', 'https://en.wikipedia.org/wiki/Yehuda_Yannay', 'https://en.wikipedia.org/wiki/Yanni', 'https://en.wikipedia.org/wiki/Joji_Yuasa', 'https://en.wikipedia.org/wiki/Yitzhak_Yedid', 'https://en.wikipedia.org/wiki/Isang_Yun', 'https://en.wikipedia.org/wiki/Yoshiki_(musician)', 'https://en.wikipedia.org/wiki/Edson_Zampronha', 'https://en.wikipedia.org/wiki/Joe_Zawinul', 'https://en.wikipedia.org/wiki/Ralph_Zurm%C3%BChle', 'https://en.wikipedia.org/wiki/Ozymandias_(pianist)', 'https://en.wikipedia.org/wiki/Henryk_G%C3%B3recki']
     
     custom_settings = {
         'ITEM_PIPELINES':{'__main__.MyFilesPipeline': 1},
         'FILES_STORE': '/Users/littlebird/Documents/images'
     }
     
     def parse(self, response):
         name = response.xpath('//div[@id="content"]/h1[@id="firstHeading"]/text()').extract()
         img = response.xpath('//div[@class="thumb tright"]//div[@class="thumbinner"]//a[@class="image"]/img/@src').extract() 
         item = composerImage()
         item['name'] = name                              
         if img:
            item['file_urls'] = ["https:" + img[0]]
         else:
            return       
         yield item

crawler = CrawlerProcess()        
crawler.crawl(ComposerImagespider)    
crawler.start()
    
# class ComposerDescriptionspider(scrapy.Spider):
#       name = "composerdescription"
#       allowed_domains = "en.wikipedia.org"
#       start_urls = []
    
#       def __init__(self, weblinkage):
#             self.weblinkage = weblinkage
     
#       def start_requests(self):
#             url = 'https://en.wikipedia.org' + self.weblinkage
#             yield self.make_requests_from_url(url)
      
#       def parse(self, reponse):        
#             description = response.css('p b::text').extract_first()      
#             return description

# load the json and rewrite the Json

# DOWNLOAD_DELAY': 3,
# ImageName = response.xpath('//div[@id="content"]/h1[@id="firstHeading"]/text()').extract() 

# if __name__ == "__main__":
#     inputjson  =  open('composerresult.json', 'r')
#     inputdata  =  json.load(inputjson)

#     artists = []
#     artists_linkage = []    
#     for sub_dict in inputdata:
#         for key, value in sub_dict.items():
#             for composer in value:
#                 temp = {}
#                 temp['name'] = composer['composer']
#                 temp['ImageName'] = composer['composer'].replace(' ', '')        
#                 temp['webpage']  = 'https://en.wikipedia.org' + composer['linkage']
#                 temp['category'] = key
#                 artists_linkage.append(temp['webpage'])
# #                 artists.append(temp)


#     outputjson =  open('Artists.json', 'w')
#     json.dump(artists, outputjson)
#     outputjson.close()
#                item['file_urls'] = ["https:" + img[0]]
#          'ITEM_PIPELINES':{'__main__.MyFilesPipeline': 1},
#          else:
#                item['file_urls'] = ["https://"]
# 'ITEM_PIPELINES': {'scrapy.pipelines.files.FilesPipeline': 1},
# return os.path.basename(urlparse(request.url).path)
